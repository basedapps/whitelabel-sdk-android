<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#26304C" />
    <title>Application</title>
  </head>
  <body>
    <h1>Hola!</h1>
    <p id="address"></p>
    <p id="balance"></p>
    <script>
        fetch('http://127.0.0.1:3876/api/blockchain/wallet')
        .then(response => response.json())
        .then(data => {
          if (data.address == undefined) {
             document.getElementById("address").innerHTML = 'No account'
          } else {
            document.getElementById("address").innerHTML = 'Address: ' + data.address

            fetch('http://127.0.0.1:3876/api/blockchain/wallet/' + data.address + '/balance')
              .then(response => response.json())
              .then(data => {
                balance = data.balances[0]
                document.getElementById("balance").innerHTML = 'Balance: ' + balance.amount + ' ' + balance.denom
              })
              .catch(error => console.error(error));
          }
        })
        .catch(error => {
          document.getElementById("address").innerHTML = 'No account'
          console.error(error)
        });
    </script>
  </body>
</html>
